(this["webpackJsonpspisested-advisor"]=this["webpackJsonpspisested-advisor"]||[]).push([[0],{55:function(e,t,a){e.exports=a.p+"static/media/smiley-happy.5c352696.svg"},56:function(e,t,a){e.exports=a.p+"static/media/smiley-neutral.8821be19.svg"},57:function(e,t,a){e.exports=a.p+"static/media/smiley-sad.d6a4195b.svg"},59:function(e,t,a){e.exports=a.p+"static/media/star.e0b7262f.svg"},63:function(e,t,a){e.exports=a.p+"static/media/mg.2379110d.svg"},66:function(e,t,a){e.exports=a(93)},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},78:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),l=a.n(i),s=(a(71),a(19)),c=(a(72),a(73),a(55)),o=a.n(c),u=a(56),d=a.n(u),m=a(57),p=a.n(m),f=(a(74),function(e){var t=e.value,a=null;return a=0===t||1===t?r.a.createElement("img",{className:"Smiley",src:o.a,alt:"Happy Face"}):2===t?r.a.createElement("img",{className:"Smiley",src:d.a,alt:"Neutral Face"}):3===t?r.a.createElement("img",{className:"Smiley",src:p.a,alt:"Sad Face"}):r.a.createElement("div",null,"Ikke"),r.a.createElement("div",{className:"CompleteSmiley"},a,r.a.createElement("p",{id:"Text"},e.year))}),v=a(58),E=a.n(v),b=a(59),S=a.n(b),h=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),u=o[0],d=o[1],m=e.rowData,p=m._id,v=m.smileys.map((function(e){return r.a.createElement(f,{key:e.date+"-"+e.grade,value:e.grade,year:e.date.substring(4)})}));function b(t,a,n,r){r.preventDefault(),d(!0),e.saveReview(p,t)}function h(e){l(e)}function g(){l(0)}var O=null,y=null,N=0===m.numberOfRatings?"No rating yet":(m.sumStars/m.numberOfRatings).toFixed(2).toString()+"/5";e.isExpanded?(O="Row Expanded",y=function(){var e=u?"Din vurdering:":"Gi en vurdering :",t=m.smileys.length>1?"Resultat fra tidligere inspeksjoner:":"Ingen tidligere inspeksjoner.";return r.a.createElement("div",{className:"ExtraInformation"},r.a.createElement("div",{id:"Address2Cell",className:"Cell"},m.address),r.a.createElement("div",{id:"GiveReviewCell",className:"Cell"},e),r.a.createElement("div",{id:"PostcodeCell",className:"Cell"},m.postcode),r.a.createElement("div",{id:"StarCell",className:"Cell"},r.a.createElement(E.a,{name:m.name,starCount:5,value:i,onStarClick:b.bind(this),onStarHover:h.bind(this),onStarHoverOut:g.bind(this),editing:!u})),r.a.createElement("div",{id:"TextCell",className:"Cell"},r.a.createElement("p",{className:"Text"},t," ")),r.a.createElement("div",{id:"OldSmileys",className:"Cell"},v.slice(1,7)))}()):O="Row";var C=r.a.createElement("img",{className:"Star",src:S.a,alt:"Star"});return r.a.createElement("li",{className:O,onClick:function(t){return e.handleClick(e.id,t)},id:e.id},r.a.createElement("div",{id:"NameCell",className:"Cell"},m.name),r.a.createElement("div",{id:"AdressCell",className:"Cell"},m.city),r.a.createElement("div",{id:"SmileyCell",className:"Cell"},v[0]),r.a.createElement("div",{id:"ReviewCell",className:"Cell"},r.a.createElement("p",{className:"Text"}," ",N," "),C),y)},g=(a(78),function(e){return function(t){fetch(e,{headers:{"Content-type":"text/html; charset=iso-8859-1"},mode:"cors"}).then((function(e){return e.json()})).then((function(e){if(e.error)throw e.error;return t({type:"FETCH_MORE_RESTURANTS",resturants:e}),e}))}}),O=a(23),y=a(27),N=a(2);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j={pending:!1,resturants:[],resturantLocations:[],error:null,query:"",page:0},T=function(e){return e.resturants},w=function(e){return e.resturantLocations},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RESTURANTS_PENDING":return R({},e,{pending:!0,resturants:[],page:0});case"FETCH_RESTURANTS_SUCCESS":return R({},e,{pending:!1,resturants:t.resturants,query:t.query,page:e.page+1});case"FETCH_RESTURANTS_ERROR":return R({},e,{pending:!1,error:t.error});case"FETCH_RESTURANTS_LOCATIONS":return R({},e,{pending:!1,resturantLocations:t.resturantLocations});case"FETCH_MORE_RESTURANTS":return R({},e,{resturants:e.resturants.concat(t.resturants),page:e.page+1});default:return e}},F=Object(y.b)((function(e){return{query:e.query,page:e.page,listRawData:T(e)}}),(function(e){return Object(O.b)({fetchMore:g},e)}))((function(e){function t(t){e.updateSelectedRow(function(t){return e.selectedRow===t?null:t}(t))}function a(e,t){var a={id:e,stars:t};fetch("https://spisested-advisor-api.herokuapp.com/companies/giverating",{method:"PUT",body:JSON.stringify(a),mode:"cors",headers:{"Content-type":"application/json; charset=utf-8"}})}Object(n.useEffect)((function(){var t=document.getElementById("Table");t.addEventListener("scroll",(function(a){var n,r=a.target;r.scrollTop+r.clientHeight+.5>=r.scrollHeight&&"=0"!==(n=t.attributes.url.value).slice(-2)&&e.fetchMore(n)}))}),[]);var i=0===e.listRawData.length?r.a.createElement("h2",{id:"placeholderText"},"S\xf8keresultater listes her hvis de finnes"):e.listRawData.map((function(n){return r.a.createElement(h,{key:n._id,id:n._id,rowData:n,handleClick:t.bind(void 0),isExpanded:e.selectedRow===n._id,saveReview:a})}));return r.a.createElement("ul",{id:"Table",url:e.query+e.page},i)})),k=a(42),x=a(61),A=a(63),L=a.n(A),M=(a(89),function(e,t){return function(a){a({type:"FETCH_RESTURANTS_PENDING"}),fetch(e+t,{headers:{"Content-type":"text/html; charset=iso-8859-1"},mode:"cors"}).then((function(e){return e.json()})).then((function(n){if(n.error)throw n.error;return e.includes("locations")?a({type:"FETCH_RESTURANTS_LOCATIONS",resturantLocations:n}):a(function(e,t){return{type:"FETCH_RESTURANTS_SUCCESS",resturants:e,query:t}}(n,e+t)),n})).catch((function(e){a(function(e){return{type:"FETCH_RESTURANTS_ERROR",error:e}}(e))}))}}),P=[{value:"0",label:"Smil"},{value:"2",label:"N\xf8ytral"},{value:"3",label:"Sur"}],D=[{value:"NAME_AZ",label:"Navn A-\xc5"},{value:"NAME_ZA",label:"Navn \xc5-A"},{value:"SMILEY_DESC",label:"Fjes Glad-Sur"},{value:"SMILEY_ASC",label:"Fjes Sur-Glad"}],H=Object(x.a)(),I=Object(y.b)(null,(function(e){return Object(O.b)({fetchResturants:M},e)}))((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),u=o[0],d=o[1],m=Object(n.useState)(D[0].value),p=Object(s.a)(m,2),f=p[0],v=p[1],E=Object(n.useState)([]),b=Object(s.a)(E,2),S=b[0],h=b[1],g=Object(n.useState)([]),O=Object(s.a)(g,2),y=O[0],N=O[1],C=Object(n.useState)([]),R=Object(s.a)(C,2),j=R[0],T=R[1],w=r.a.createElement("img",{className:"MagnifyingGlass",src:L.a,alt:"Magnifying Glass"});function _(){e.updateSelectedRow(null);var t="name="+u+"&orderby="+f+"&cities="+S+"&smileys="+y+"&page=";e.fetchResturants("https://spisested-advisor-api.herokuapp.com/companies/locations/?",t),e.fetchResturants("https://spisested-advisor-api.herokuapp.com/companies?",t,!0)}Object(n.useEffect)((function(){fetch("https://spisested-advisor-api.herokuapp.com/companies/cities",{}).then((function(e){return e.json()})).then((function(e){T(e[0].cities.sort().map((function(e){return{value:e,label:e}})))}),(function(e){console.log(e,"Error while loading cities from server")}))}),[]);var F=i?"F\xe6rre filter":"Flere filter",x=null;return i&&(x=r.a.createElement("div",{id:"ExtraFilters",className:"Grid"},r.a.createElement("div",{className:"Label",id:"CitiesLabel"},"Filtrer etter byer"),r.a.createElement("div",{id:"FilterCities",className:"Cell"},r.a.createElement(k.a,{id:"FilterCitiesbar",closeMenuOnSelect:!1,components:H,isMulti:!0,options:j,placeholder:"Velg..",onChange:function(e){var t="";null!==e&&e.forEach((function(e){t=t+(t.length>0?"-":"")+e.value})),h(t)}.bind(void 0)})),r.a.createElement("div",{className:"Label",id:"SmileysLabel"},"Filtrer etter fjes"),r.a.createElement("div",{id:"FilterSmiley",className:"Cell"},r.a.createElement(k.a,{id:"FilterSmileybar",closeMenuOnSelect:!1,components:H,isMulti:!0,options:P,placeholder:"Velg..",onChange:function(e){var t="";null!==e&&e.forEach((function(e){t=t+(t.length>0?"-":"")+e.value,"0"===e.value&&(t+="-1")})),N(t)}.bind(void 0)})))),r.a.createElement("div",{id:"Searchbar",className:"Grid"},r.a.createElement("div",{id:"LabelRestaurant",className:"Label"},"S\xf8k etter spisested"),r.a.createElement("div",{id:"TextRestaurant",className:"Cell"},r.a.createElement("input",{type:"text",placeholder:"Navn",name:"fname",onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&_()},autoFocus:!0}),r.a.createElement("button",{id:"SearchButton",onClick:_},w)),r.a.createElement("div",{id:"LabelSort",className:"Label"},"Sorter etter"),r.a.createElement("div",{id:"SortSelect",className:"Cell"},r.a.createElement(k.a,{id:"SortSelectbar",closeMenuOnSelect:!0,components:H,options:D,defaultValue:D[0],onChange:function(e){v(e.value)}.bind(void 0)})),r.a.createElement("div",{id:"FiltersButtonCell"},r.a.createElement("button",{id:"FiltersButton",onClick:function(){l(!i),i&&(h([]),N([]))}},F)),x)})),U=(a(90),a(50)),G=a(53),J=a(51),q=a(52),B=a(64),V=a.n(B),Z=function(e){return r.a.createElement(V.a,null,e.coordinates.map((function(t,a){return r.a.createElement(J.a,{key:a,position:t},r.a.createElement(q.a,null,e.resturantNames[a]))})))},z=Object(y.b)((function(e){return{resturants:w(e)}}),null)((function(e){var t=[64.6427,12.4805],a=Object(n.useState)(t),i=Object(s.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(5),u=Object(s.a)(o,2),d=u[0],m=u[1],p=e.resturants,f=[],v=[];if(e.resturants.map((function(e){null!==e.coordinates&&(f.push(e.coordinates),v.push(e.name))})),null!==e.selectedPointId){var E=p.filter((function(t){return t._id===e.selectedPointId}))[0];if(null!==E.coordinates){var b=E.coordinates;JSON.stringify(l)!==JSON.stringify(b)&&(c(b),m(20))}else JSON.stringify(l)!==JSON.stringify(t)&&(c(t),m(5))}else JSON.stringify(l)!==JSON.stringify(t)&&(c(t),m(5));return r.a.createElement(U.a,{className:"mapComponent",center:l,zoom:d,maxZoom:18},r.a.createElement(G.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(Z,{coordinates:f,resturantNames:v}))}));var W=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),i=a[0],l=a[1],c=function(e){l(e)};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"title"},r.a.createElement("h1",null,"Spisested Adviser")),r.a.createElement("div",{id:"searchbar"},r.a.createElement(I,{updateSelectedRow:c.bind(this)})),r.a.createElement("div",{id:"map"},r.a.createElement(z,{selectedPointId:i})),r.a.createElement("div",{id:"list"},r.a.createElement(F,{updateSelectedRow:c.bind(this),selectedRow:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(65),Y=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||O.c)(O.a.apply(void 0,[X.a])),K=Object(O.d)(_,Y);l.a.render(r.a.createElement(y.a,{store:K},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.232ee2e0.chunk.js.map